---
/**
 * Video component for MDX content
 * 
 * A simple, responsive video component that can be imported and used in MDX files.
 * Usage in MDX:
 * import Video from '../../components/ui/Video.astro';
 * <Video src="/path/to/video.mp4" />
 */

interface Props {
  src: string;
  poster?: string;
  caption?: string;
  width?: number;
  height?: number;
  autoplay?: boolean;
  loop?: boolean;
  muted?: boolean;
  controls?: boolean;
  preload?: 'none' | 'metadata' | 'auto';
  class?: string;
}

const {
  src,
  poster,
  caption,
  width,
  height,
  autoplay = false,
  loop = false,
  muted = false,
  controls = true,
  preload = 'metadata',
  class: className = ''
} = Astro.props;
---

<div class={`video-container relative w-full ${className}`}>
  <video
    src={src}
    poster={poster}
    width={width}
    height={height}
    controls={controls}
    autoplay={autoplay}
    loop={loop}
    muted={muted}
    preload={preload}
    class="w-full h-auto rounded-lg shadow-lg
           bg-gray-100 dark:bg-gray-800
           focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2
           dark:focus:ring-offset-gray-900"
    aria-describedby={caption ? 'video-caption' : undefined}
  >
    Your browser doesn't support HTML video. 
    <a href={src} class="text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300">
      Download the video
    </a>
    instead.
  </video>
</div>

<!-- Caption -->
{caption && (
  <div id="video-caption" class="mt-3 text-sm text-gray-600 dark:text-gray-400 text-center italic">
    {caption}
  </div>
)}

<style>
  .video-container video {
    transition: opacity 0.3s ease-in-out;
  }
</style>
