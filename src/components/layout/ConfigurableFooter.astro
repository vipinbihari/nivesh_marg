---
import { BLOG_CONFIG } from '../../config/current-config';
import SocialLinks from '../ui/SocialLinks.astro';
import Logo from '../ui/Logo.astro';
import NewsletterSignup from '../features/NewsletterSignup.astro';

const { site, branding, navigation, social } = BLOG_CONFIG;
const currentYear = new Date().getFullYear();
---

<footer class="bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="lg:grid lg:grid-cols-4 lg:gap-8">
      <!-- Brand & Description -->
      <div class="lg:col-span-1 mb-8 lg:mb-0">
        <Logo 
          config={branding}
          siteName={site.name}
          tagline={site.tagline}
          class="mb-4"
        />
        <p class="text-gray-600 dark:text-gray-400 text-sm mb-6 max-w-sm">
          {site.description}
        </p>
        <SocialLinks 
          links={social}
          class="flex space-x-4"
        />
      </div>

      <!-- Footer Sections -->
      <div class="lg:col-span-3">
        <div class="grid grid-cols-2 md:grid-cols-3 gap-8">
          {navigation.footer.map((section) => (
            <div>
              <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider mb-4">
                {section.title}
              </h3>
              <ul class="space-y-3">
                {section.links.map((link) => (
                  <li>
                    <a 
                      href={link.href}
                      class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors duration-200 text-sm"
                      target={link.external ? '_blank' : undefined}
                      rel={link.external ? 'noopener noreferrer' : undefined}
                    >
                      {link.label}
                      {link.external && (
                        <svg class="inline h-3 w-3 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                        </svg>
                      )}
                    </a>
                  </li>
                ))}
              </ul>
            </div>
          ))}


        </div>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <p class="text-gray-500 dark:text-gray-400 text-sm text-center md:text-left mb-4 md:mb-0">
          &copy; {currentYear} {site.name}. All rights reserved.
        </p>
        
        <div class="flex justify-center w-full">
          <NewsletterSignup position="footer" />
        </div>
      </div>
    </div>
  </div>
</footer> 